<!--Code adapted from Smartphone Products 3 WOD by Maggie Mulhall-->

<script src="./product_data.js"></script>
<script>
    function isNonNegInt(inputstring, returnErrors = false) {
        errors = []; // assume no errors at first
        if(Number(inputstring) != inputstring) {
            errors.push('<font color="red">Not a Number!</font>'); // Check if string is a number, if not say "Not a number!"
        }
        else
        {
            if (inputstring ==0) errors.push('<font color="red">You Need More Than That!</font>');
            if(inputstring < 0) errors.push('<font color="red">Negative Value!</font>'); // Check if it is non-negative, if not say "Negative value!"
            if(parseInt(inputstring) != inputstring) errors.push('<font color="red">Not an integer!</font>'); // Check that it is an integer, if not say "Not an integer!"
        }          
        return returnErrors ? errors : (errors.length == 0); // if there are no errors , errors.length ==0, proceed to nect validation
    }
     
    // Checks Quantity textbox for validation errors
    function checkQuantityTextbox(theTextbox) {
        errors = isNonNegInt(theTextbox.value, true);
        if (errors.length == 0) errors = ['You want:']; //if there are no errors, "You want:*requested amount*
        if (theTextbox.value.trim() == '') errors = ['Please type quantity desired: '];// if there are no requested amounts, ask for amount
        document.getElementById(theTextbox.name + '_label').innerHTML = errors.join('<font color="red">, </font>');
    }    

</script>

<html>
    
<head>
    <meta charset="utf-8">
    <title>Sweatshirt Store</title>

    <link href="https://fonts.googleapis.com/css?family=Cherry+Swash|Raleway" rel="stylesheet">

    <link href="products-style.css" rel="stylesheet">

    <script src="./product_data.js" type="text/javascript"></script>
    
</head>

<body>
    <header>
        <h1>Maggie's Super Sweatshirt Shop</h1>
        <h2>
            Think Of How Great You Would Look In These!
        </h2>
    </header>
    <form action="./process_form" method="post">
    <div><main>
      <script>
      for (i = 0; i < products.length; i++) {
          document.write(`
              <section class ="items">
                  <h2>${products[i].type}</h2>
                  <h3 label id ="quantity_available${i}"><i>${products[i].quantity_available} in stock!</i></h3></label>
                  <h4>$${products[i].price.toFixed(2)}</h4>
                  <img src="./images/${products[i].image}" class="img">
                 <h5><label id ="quantity${i}_label">Number of Items: </label></h5>
                  <h5><input type="text" placeholder="0" name="quantity${i}" onkeyup="checkQuantityTextbox(this);"></h5>
      
                  </section>`);
              }
      </script>
  </main></div>
  <input type="submit" value="Purchase!" name="purchase_submit">
</form>

          <footer>
                  <h1><i>
                      Get Your Favorite New Sweatshirt Today!
                  </h1></i>
              </footer>
          </form>
  
  </body>
   
  </html>